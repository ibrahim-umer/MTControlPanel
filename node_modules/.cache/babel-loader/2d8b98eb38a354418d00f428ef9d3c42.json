{"ast":null,"code":"import _classCallCheck from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Component}from\"react\";import React from'react';import AdminLayout from'../../../AdminLayout/AdminLayout';import TbInputControl from'../UI/TbInputControl';import axios from\"axios\";import{Redirect}from\"react-router\";var AttachWithNewScheme=/*#__PURE__*/function(_Component){_inherits(AttachWithNewScheme,_Component);var _super=_createSuper(AttachWithNewScheme);function AttachWithNewScheme(props){var _this;_classCallCheck(this,AttachWithNewScheme);_this=_super.call(this,props);_this.ReadyUser=function(event){if(event.target.name==='GetAmountPayable'){_this.TotalAmountPayable(event.target);}else if(event.target.name==='GetMonthlyInstallment'){_this.MonthlyInstallment(event.target);}};_this.TotalAmountPayable=function(target){_this.setState({AccProtoType:{\"id\":0,\"amountPayable\":target.value,\"monthlyInstalment\":_this.state.AccProtoType.monthlyInstalment,\"isAccClosed\":false,\"userid\":_this.state.AccProtoType.userid,\"mtServiceId\":_this.state.AccProtoType.mtServiceId,\"accPaymentDetails\":null}});};_this.MonthlyInstallment=function(target){_this.setState({AccProtoType:{\"id\":0,\"amountPayable\":_this.state.AccProtoType.amountPayable,\"monthlyInstalment\":target.value,\"isAccClosed\":false,\"userid\":_this.state.AccProtoType.userid,\"mtServiceId\":_this.state.AccProtoType.mtServiceId,\"accPaymentDetails\":null}});};_this.PostData=function(){axios.get(window.$domain+'api/Accounts/GetAccountbyUserId/'+_this.state.AccProtoType.userid).then(function(resp){var duplicated=false;resp.data.map(function(acc){if(acc.mtServiceId===_this.state.AccProtoType.mtServiceId){duplicated=true;alert('Sorry! You are not allow to make duplication');}});if(!duplicated){axios.post(window.$domain+'api/Accounts',_this.state.AccProtoType).then(function(resp){_this.setState({redirect:true});}).catch(function(resp){return alert(resp.data.message);});}}).catch(function(resp){return alert(resp.data.message);});};_this.MTServiceSelection=function(event){if(event.target.value!=='Please Select Scheme/Product'){_this.state.MTServices.map(function(mtService){if(mtService.name===event.target.value){_this.setState({AccProtoType:{\"id\":0,\"amountPayable\":_this.state.AccProtoType.amountPayable,\"monthlyInstalment\":_this.state.AccProtoType.monthlyInstalment,\"isAccClosed\":false,\"userid\":_this.state.AccProtoType.userid,\"mtServiceId\":mtService.id,\"accPaymentDetails\":null}});}});}};_this.state={AccProtoType:{\"id\":0,\"amountPayable\":0,\"monthlyInstalment\":0,\"isAccClosed\":false,\"userid\":0,\"mtServiceId\":0,\"accPaymentDetails\":null},MTServices:null,redirect:false};_this.amountInputRef=/*#__PURE__*/React.createRef();_this.ReadyUser=_this.ReadyUser.bind(_assertThisInitialized(_this));return _this;}_createClass(AttachWithNewScheme,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.state.AccProtoType.userid===0){this.setState({AccProtoType:{\"id\":0,\"amountPayable\":this.state.AccProtoType.amountPayable,\"monthlyInstalment\":this.state.AccProtoType.monthlyInstalment,\"isAccClosed\":false,\"userid\":this.props.match.params.id,\"mtServiceId\":this.state.AccProtoType.mtServiceId,\"accPaymentDetails\":null}});}if(this.state.MTServices===null){axios.get(window.$domain+'api/MTServices').then(function(resp){_this2.setState({MTServices:resp.data});});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(AdminLayout,{children:[this.state.redirect?/*#__PURE__*/_jsx(Redirect,{to:\"/manageuser\"}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"jumbotron\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Add User to New Scheme\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h6\",{children:\"Please Select Scheme/Product\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"select\",{class:\"form-select form-select-lg\",onChange:this.MTServiceSelection,\"aria-label\":\".form-select-sm example\",children:[/*#__PURE__*/_jsx(\"option\",{selected:true,children:\"Please Select Scheme/Product\"}),this.state.MTServices?this.state.MTServices.map(function(MTService){return/*#__PURE__*/_jsx(\"option\",{children:MTService.name},MTService.id);}):/*#__PURE__*/_jsx(\"option\",{selected:true,children:\"Wait We are trying to Load Your Providing Services\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group \",children:[/*#__PURE__*/_jsx(\"label\",{for:\"GetAmountPayable\",children:\"Total Amount Payable:\"}),/*#__PURE__*/_jsx(\"input\",{ref:this.amountInputRef,type:\"number\",class:\"form-control\",onChange:this.ReadyUser,name:\"GetAmountPayable\"})]}),/*#__PURE__*/_jsx(TbInputControl,{DataInputHandler:this.ReadyUser,Name:'Monthly Installment',inutType:'number',ctrlName:'GetMonthlyInstallment'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:this.PostData,children:\"Add User to this Sceme\"})]})]});}}]);return AttachWithNewScheme;}(Component);export default AttachWithNewScheme;","map":{"version":3,"sources":["G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/src/MalikTraders/Components/Pages/UserManagement/AttachWithNewScheme/AttachtoNewScheme.jsx"],"names":["Component","React","AdminLayout","TbInputControl","axios","Redirect","AttachWithNewScheme","props","ReadyUser","event","target","name","TotalAmountPayable","MonthlyInstallment","setState","AccProtoType","value","state","monthlyInstalment","userid","mtServiceId","amountPayable","PostData","get","window","$domain","then","resp","duplicated","data","map","acc","alert","post","redirect","catch","message","MTServiceSelection","MTServices","mtService","id","amountInputRef","createRef","bind","match","params","MTService"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\nimport React from 'react'\r\nimport AdminLayout from '../../../AdminLayout/AdminLayout'\r\nimport TbInputControl from '../UI/TbInputControl'\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router\";\r\n\r\nclass AttachWithNewScheme extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            AccProtoType:{\r\n                \"id\": 0,\r\n                \"amountPayable\": 0,\r\n                \"monthlyInstalment\": 0,\r\n                \"isAccClosed\": false,\r\n                \"userid\": 0,\r\n                \"mtServiceId\": 0,\r\n                \"accPaymentDetails\": null\r\n            },\r\n            MTServices: null,\r\n            redirect: false\r\n        };\r\n        this.amountInputRef = React.createRef();\r\n        this.ReadyUser = this.ReadyUser.bind(this);\r\n    }\r\n\r\n    ReadyUser=(event)=>{\r\n        if(event.target.name === 'GetAmountPayable')\r\n        {\r\n            this.TotalAmountPayable(event.target)\r\n        }\r\n        else if(event.target.name === 'GetMonthlyInstallment'){\r\n            this.MonthlyInstallment(event.target)\r\n        }\r\n    }\r\n\r\n    TotalAmountPayable = target =>{\r\n        this.setState({AccProtoType: \r\n            {\r\n                \"id\": 0,\r\n                \"amountPayable\": target.value,\r\n                \"monthlyInstalment\": this.state.AccProtoType.monthlyInstalment,\r\n                \"isAccClosed\": false,\r\n                \"userid\": this.state.AccProtoType.userid,\r\n                \"mtServiceId\": this.state.AccProtoType.mtServiceId,\r\n                \"accPaymentDetails\": null\r\n            }\r\n        })\r\n    }\r\n\r\n    MonthlyInstallment = target=>{\r\n        this.setState({AccProtoType: \r\n            {\r\n                \"id\": 0,\r\n                \"amountPayable\": this.state.AccProtoType.amountPayable,\r\n                \"monthlyInstalment\": target.value,\r\n                \"isAccClosed\": false,\r\n                \"userid\": this.state.AccProtoType.userid,\r\n                \"mtServiceId\":this.state.AccProtoType.mtServiceId,\r\n                \"accPaymentDetails\": null\r\n            }\r\n        })\r\n    }\r\n\r\n    PostData=()=>{\r\n        axios.get(window.$domain + 'api/Accounts/GetAccountbyUserId/' + this.state.AccProtoType.userid)\r\n        .then(\r\n            resp=> {\r\n                var duplicated = false;\r\n                resp.data.map(acc=>{\r\n                    if(acc.mtServiceId === this.state.AccProtoType.mtServiceId)\r\n                    {\r\n                        duplicated = true;\r\n                        alert('Sorry! You are not allow to make duplication')\r\n                    }\r\n                });\r\n                if(!duplicated)\r\n                {\r\n                    axios.post(window.$domain + 'api/Accounts',this.state.AccProtoType)\r\n                        .then(resp=> {\r\n                            this.setState({redirect: true});\r\n                        }). catch(\r\n                            resp=> alert(resp.data.message)\r\n                        );\r\n                }\r\n            }\r\n        ). catch(\r\n            resp=> alert(resp.data.message)\r\n        );\r\n    }\r\n\r\n    MTServiceSelection = (event) => {\r\n        if(event.target.value !== 'Please Select Scheme/Product'){\r\n            this.state.MTServices.map(\r\n                mtService=>{\r\n                    if(mtService.name === event.target.value){\r\n                        this.setState({AccProtoType: \r\n                            {\r\n                                \"id\": 0,\r\n                                \"amountPayable\": this.state.AccProtoType.amountPayable,\r\n                                \"monthlyInstalment\": this.state.AccProtoType.monthlyInstalment,\r\n                                \"isAccClosed\": false,\r\n                                \"userid\": this.state.AccProtoType.userid,\r\n                                \"mtServiceId\": mtService.id,\r\n                                \"accPaymentDetails\": null\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(this.state.AccProtoType.userid === 0){\r\n            this.setState({AccProtoType: {\r\n                \"id\": 0,\r\n                \"amountPayable\": this.state.AccProtoType.amountPayable,\r\n                \"monthlyInstalment\": this.state.AccProtoType.monthlyInstalment,\r\n                \"isAccClosed\": false,\r\n                \"userid\": this.props.match.params.id,\r\n                \"mtServiceId\": this.state.AccProtoType.mtServiceId,\r\n                \"accPaymentDetails\": null\r\n            }})\r\n        }\r\n        if(this.state.MTServices === null){\r\n            axios.get(window.$domain + 'api/MTServices').\r\n            then(resp=>{\r\n                this.setState({MTServices: resp.data});\r\n            });\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <AdminLayout>\r\n                {this.state.redirect? <Redirect to='/manageuser'/>: ''}\r\n                <div className='jumbotron'>\r\n                    <div className='container-fluid'>\r\n                        <h5>Add User to New Scheme</h5>\r\n                        <hr/> \r\n                        <h6>Please Select Scheme/Product</h6>\r\n                        <hr/>\r\n                            <select class=\"form-select form-select-lg\" onChange={this.MTServiceSelection} aria-label=\".form-select-sm example\">\r\n                            <option selected>Please Select Scheme/Product</option>\r\n                                {\r\n                                    this.state.MTServices?\r\n                                    this.state.MTServices.map(MTService=>{\r\n                                        return <option key={MTService.id}>{MTService.name}</option>\r\n                                    }):\r\n                                    <option selected>Wait We are trying to Load Your Providing Services</option>\r\n                                }\r\n                            </select>\r\n                    </div>\r\n                    <hr/>\r\n                    <div class=\"form-group \">\r\n                        <label for='GetAmountPayable'>Total Amount Payable:</label>\r\n                        <input ref={this.amountInputRef} type='number' class=\"form-control\" onChange={this.ReadyUser} name='GetAmountPayable'/>\r\n                    </div>\r\n                    <TbInputControl DataInputHandler={this.ReadyUser} Name={'Monthly Installment'} inutType={'number'} ctrlName={'GetMonthlyInstallment'} />\r\n                    <button className=\"btn btn-success\" onClick={this.PostData}>Add User to this Sceme</button>\r\n                </div>\r\n            </AdminLayout>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default AttachWithNewScheme;"]},"metadata":{},"sourceType":"module"}