{"ast":null,"code":"import _classCallCheck from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Component}from\"react\";import AdminLayout from\"../../../AdminLayout/AdminLayout\";import axios from'axios';import Cookie from'universal-cookie';import{Link}from\"react-router-dom\";import AddNewPayment from\"../../UserManagement/AddNewPayment/AddNewPayment\";import{Spinner}from\"react-bootstrap\";var PaymentHistory=/*#__PURE__*/function(_Component){_inherits(PaymentHistory,_Component);var _super=_createSuper(PaymentHistory);function PaymentHistory(props){var _this;_classCallCheck(this,PaymentHistory);_this=_super.call(this,props);_this.state={historyList:[]};return _this;}_createClass(PaymentHistory,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.state.historyList.length===0){axios.get(window.$domain+'api/AccDetails/GetAccDetailsbyAccountId/'+this.props.match.params.id).then(function(resp){resp.data.map(function(payment){axios.get(window.$domain+'api/Users/'+payment.postedByUserId).then(function(user){var arrayHistory=[];arrayHistory=_this2.state.historyList;arrayHistory.push({payDate:payment.payingDate,paymentId:payment.id,payedAmount:payment.payedAmount,PostedByUser:user.data.userName});_this2.setState({historyList:arrayHistory});});});}).catch(function(err){console.log(err);});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(AdminLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"jumbotron container-fluid overflow-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment History\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date -- Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Received By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount Modification\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.historyList!==null?this.state.historyList.map(function(payment){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(payment.payDate).toDateString()+' -- '+new Date(payment.payDate).toLocaleTimeString()}),/*#__PURE__*/_jsx(\"td\",{children:payment.payedAmount}),/*#__PURE__*/_jsx(\"td\",{children:payment.PostedByUser}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:'/account/payment/modification/'+payment.paymentId,children:\"modify\"})})]});}):/*#__PURE__*/_jsx(Spinner,{animation:\"grow\"})})]})]})});}}]);return PaymentHistory;}(Component);export default PaymentHistory;","map":{"version":3,"sources":["G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/src/MalikTraders/Components/Pages/AccountManagement/PaymentHistory/PaymentHistory.jsx"],"names":["Component","AdminLayout","axios","Cookie","Link","AddNewPayment","Spinner","PaymentHistory","props","state","historyList","length","get","window","$domain","match","params","id","then","resp","data","map","payment","postedByUserId","user","arrayHistory","push","payDate","payingDate","paymentId","payedAmount","PostedByUser","userName","setState","catch","err","console","log","Date","toDateString","toLocaleTimeString"],"mappings":"wxBAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,MAAOC,CAAAA,WAAP,KAAwB,kCAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,kDAA1B,CACA,OAASC,OAAT,KAAwB,iBAAxB,C,GAEMC,CAAAA,c,gHAEF,wBAAYC,KAAZ,CAAmB,gDACf,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAc,CACVC,WAAW,CAAE,EADH,CAAd,CAFe,aAKlB,C,wFACkB,iBACf,GAAG,KAAKD,KAAL,CAAWC,WAAX,CAAuBC,MAAvB,GAAkC,CAArC,CACA,CACIT,KAAK,CAACU,GAAN,CAAUC,MAAM,CAACC,OAAP,CAAiB,0CAAjB,CAA8D,KAAKN,KAAL,CAAWO,KAAX,CAAiBC,MAAjB,CAAwBC,EAAhG,EACCC,IADD,CAEI,SAAAC,IAAI,CAAE,CACEA,IAAI,CAACC,IAAL,CAAUC,GAAV,CACI,SAAAC,OAAO,CAAI,CACPpB,KAAK,CAACU,GAAN,CAAUC,MAAM,CAACC,OAAP,CAAiB,YAAjB,CAAgCQ,OAAO,CAACC,cAAlD,EAAkEL,IAAlE,CACI,SAAAM,IAAI,CAAE,CACF,GAAIC,CAAAA,YAAY,CAAG,EAAnB,CACAA,YAAY,CAAG,MAAI,CAAChB,KAAL,CAAWC,WAA1B,CACAe,YAAY,CAACC,IAAb,CACI,CACIC,OAAO,CAAEL,OAAO,CAACM,UADrB,CAEIC,SAAS,CAAEP,OAAO,CAACL,EAFvB,CAGIa,WAAW,CAAER,OAAO,CAACQ,WAHzB,CAIIC,YAAY,CAAEP,IAAI,CAACJ,IAAL,CAAUY,QAJ5B,CADJ,EAOA,MAAI,CAACC,QAAL,CAAc,CAACvB,WAAW,CAAEe,YAAd,CAAd,EACH,CAZL,EAcH,CAhBL,EAkBP,CArBL,EAsBES,KAtBF,CAuBI,SAAAC,GAAG,CAAG,CACFC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAzBL,EA2BH,CACJ,C,uCAEQ,CACL,mBACI,KAAC,WAAD,wBACI,aAAK,SAAS,CAAC,yCAAf,wBACI,uCADJ,cAEA,eAAO,SAAS,CAAC,sBAAjB,wBACI,oCACI,mCACI,oCADJ,cAEI,+BAFJ,cAGI,2CAHJ,cAII,2CAJJ,GADJ,EADJ,cASI,uBAES,KAAK1B,KAAL,CAAWC,WAAX,GAA2B,IAA3B,CACA,KAAKD,KAAL,CAAWC,WAAX,CAAuBW,GAAvB,CAA2B,SAAAC,OAAO,CAAE,CACjC,mBAAO,mCACK,oBAAK,GAAIgB,CAAAA,IAAJ,CAAShB,OAAO,CAACK,OAAjB,EAA0BY,YAA1B,GAA2C,MAA3C,CAAoD,GAAID,CAAAA,IAAJ,CAAShB,OAAO,CAACK,OAAjB,EAA0Ba,kBAA1B,EAAzD,EADL,cAEK,oBAAKlB,OAAO,CAACQ,WAAb,EAFL,cAGK,oBAAKR,OAAO,CAACS,YAAb,EAHL,cAIK,iCAAI,KAAC,IAAD,EAAM,EAAE,CAAE,iCAAmCT,OAAO,CAACO,SAArD,oBAAJ,EAJL,GAAP,CAMF,CAPD,CADA,cAQI,KAAC,OAAD,EAAS,SAAS,CAAC,MAAnB,EAVb,EATJ,GAFA,GADJ,EADJ,CA+BH,C,4BAzEwB7B,S,EA6E7B,cAAeO,CAAAA,cAAf","sourcesContent":["import { Component } from \"react\";\r\nimport AdminLayout from \"../../../AdminLayout/AdminLayout\";\r\nimport axios from 'axios'\r\nimport Cookie from 'universal-cookie'\r\nimport { Link } from \"react-router-dom\";\r\nimport AddNewPayment from \"../../UserManagement/AddNewPayment/AddNewPayment\";\r\nimport { Spinner } from \"react-bootstrap\";\r\n\r\nclass PaymentHistory extends Component{\r\n   \r\n    constructor(props) {\r\n        super(props);\r\n        this.state =  {\r\n            historyList: []\r\n        };\r\n    }\r\n    componentDidMount(){\r\n        if(this.state.historyList.length === 0)\r\n        {\r\n            axios.get(window.$domain + 'api/AccDetails/GetAccDetailsbyAccountId/' + this.props.match.params.id)\r\n            .then(\r\n                resp=>{\r\n                        resp.data.map(\r\n                            payment => {\r\n                                axios.get(window.$domain + 'api/Users/' + payment.postedByUserId).then(\r\n                                    user=>{\r\n                                        var arrayHistory = [];\r\n                                        arrayHistory = this.state.historyList;\r\n                                        arrayHistory.push(\r\n                                            {\r\n                                                payDate: payment.payingDate, \r\n                                                paymentId: payment.id,\r\n                                                payedAmount: payment.payedAmount,\r\n                                                PostedByUser: user.data.userName\r\n                                            });\r\n                                        this.setState({historyList: arrayHistory});\r\n                                    }\r\n                                )\r\n                            }\r\n                    )\r\n                }\r\n            ).catch(\r\n                err=> {\r\n                    console.log(err);\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n     render(){\r\n        return(\r\n            <AdminLayout>\r\n                <div className=\"jumbotron container-fluid overflow-auto\">\r\n                    <h2>Payment History</h2>\r\n                <table className=\"table table-bordered\">\r\n                    <thead>\r\n                        <tr >\r\n                            <th>Date -- Time</th>\r\n                            <th>Payment</th>\r\n                            <th>Payment Received By</th>\r\n                            <th>Amount Modification</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                         {\r\n                             this.state.historyList !== null ?\r\n                             this.state.historyList.map(payment=>{\r\n                                return <tr>\r\n                                            <td>{new Date(payment.payDate).toDateString() + ' -- ' + new Date(payment.payDate).toLocaleTimeString() }</td>\r\n                                            <td>{payment.payedAmount}</td>\r\n                                            <td>{payment.PostedByUser}</td>\r\n                                            <td><Link to={'/account/payment/modification/' + payment.paymentId}>modify</Link></td>\r\n                                    </tr>\r\n                             }): <Spinner animation=\"grow\" />\r\n                         }\r\n                    </tbody>\r\n                </table>\r\n                \r\n            </div>\r\n            </AdminLayout>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nexport default PaymentHistory;\r\n"]},"metadata":{},"sourceType":"module"}