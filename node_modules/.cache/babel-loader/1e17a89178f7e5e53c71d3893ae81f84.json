{"ast":null,"code":"import _classCallCheck from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import{Component}from'react';import Cookie from'universal-cookie/es6';import Axios from\"axios\";import{Redirect}from\"react-router\";import{Spinner}from'react-bootstrap';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.loginUser=function(){_this.setState({displayAnimator:true});Axios.post(window.$domain+'api/Users/LoginUser?UserName='+_this.state.user+'&Password='+_this.state.password).then(function(resp){if(resp.data.role!=='admin'){alert('Your are not authorize for operating Admin Control');return;}Axios.post(window.$domain+'api/Users/GetUserDatailsId/'+resp.data.id).then(function(resp){Axios.post(window.$domain+'api/UserDetails/UpdateLastLogin/'+resp.data).then(function(resp){alert('You are logged in successfully');});});var cookies=new Cookie();cookies.set('logedInUser',{userName:resp.data.userName,email:resp.data.email,role:resp.data.role,id:resp.data.id},{path:'/',maxAge:3600});_this.setState({login:true});_this.setState({displayAnimator:false});}).catch(function(err){if(err)alert(err.response.data);_this.setState({displayAnimator:false});});};_this.state={user:'',password:'',login:false,displayAnimator:false};_this.loginUser=_this.loginUser.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){var cookies=new Cookie();if(cookies.get('logedInUser')!==undefined&&this.state.login===false){this.setState({login:true});}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",style:{width:\"80%\"},children:[this.state.login?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 col-md-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-6 col-md-8 login-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12 login-title \",children:/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-key\",\"aria-hidden\":\"true\"}),\"-Login\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12 login-form\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12 login-form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-control-label\",children:\"UserName\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){return _this2.setState({user:event.target.value});},type:\"text\",className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-control-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){return _this2.setState({password:event.target.value});},type:\"password\",className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12 loginbttm\",children:this.state.displayAnimator?/*#__PURE__*/_jsx(Spinner,{animation:\"grow\"}):/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 login-btn login-button\",children:/*#__PURE__*/_jsx(\"button\",{onClick:this.loginUser,className:\"btn btn-outline-primary btn-light\",style:{alignContent:\"center\"},children:\"Login\"})})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 col-md-2\"})]})]})]});}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["G:/Projects/Malik Traders/Admin Controll/MT Admin Control App/src/MalikTraders/Components/Pages/Login/Login.jsx"],"names":["React","Component","Cookie","Axios","Redirect","Spinner","Login","props","loginUser","setState","displayAnimator","post","window","$domain","state","user","password","then","resp","data","role","alert","id","cookies","set","userName","email","path","maxAge","login","catch","err","response","bind","get","undefined","width","textAlign","event","target","value","alignContent"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Component } from 'react';\r\nimport Cookie from 'universal-cookie/es6';\r\nimport Axios from \"axios\"\r\nimport { Redirect } from \"react-router\";\r\nimport { Spinner } from 'react-bootstrap';\r\n\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: '',\r\n            password: '',\r\n            login: false,\r\n            displayAnimator: false\r\n        };\r\n    this.loginUser = this.loginUser.bind(this);\r\n    }\r\n    \r\n    loginUser=()=>{\r\n        this.setState({displayAnimator: true})\r\n        Axios.post(window.$domain + 'api/Users/LoginUser?UserName='+ this.state.user + '&Password='+ this.state.password )\r\n        .then(resp=>{\r\n            if(resp.data.role !== 'admin' ) \r\n            {\r\n                alert('Your are not authorize for operating Admin Control');\r\n                return ;\r\n            }\r\n            Axios.post(window.$domain + 'api/Users/GetUserDatailsId/'+ resp.data.id )\r\n                .then(\r\n                    resp=>\r\n                    {\r\n                        \r\n                        Axios.post(window.$domain + 'api/UserDetails/UpdateLastLogin/'+ resp.data )\r\n                        .then(\r\n                            resp=>\r\n                            {\r\n                                alert('You are logged in successfully')\r\n                            });\r\n                    });\r\n            var cookies = new Cookie();\r\n            cookies.set('logedInUser', {\r\n                userName: resp.data.userName,\r\n                email: resp.data.email, \r\n                role: resp.data.role, \r\n                id: resp.data.id\r\n                }, \r\n                {\r\n                path: '/',\r\n                maxAge: 3600\r\n              });\r\n              this.setState({login: true});\r\n              this.setState({displayAnimator: false})\r\n        })\r\n        .catch(\r\n            err=>{\r\n                if(err)\r\n                alert(err.response.data);\r\n                this.setState({displayAnimator: false});\r\n            });\r\n    }\r\n    componentDidMount(){\r\n        var cookies = new Cookie();\r\n        if(cookies.get('logedInUser') !== undefined && this.state.login === false){\r\n            this.setState({login: true});\r\n        }\r\n    }\r\n    render(){\r\n        \r\n        return (\r\n            <div className=\"container mt-4\" style={{width: \"80%\"}}>\r\n                {this.state.login? <Redirect to='/' />:''}\r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-3 col-md-2\"></div>\r\n                    <div className=\"col-lg-6 col-md-8 login-box\">\r\n                        \r\n                        <div className=\"col-lg-12 login-title \">\r\n                            \r\n                            <p style={{textAlign: 'center'}}>\r\n                                <i className=\"fa fa-key\" aria-hidden=\"true\"></i> \r\n                                -Login\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"col-lg-12 login-form\">\r\n                            <div className=\"col-lg-12 login-form\">\r\n                                <form onSubmit>\r\n                                    <div className=\"form-group\">\r\n                                        <label className=\"form-control-label\">UserName</label>\r\n                                        <input onChange={event=> this.setState({user: event.target.value})} type=\"text\" className=\"form-control\" />\r\n                                    </div>\r\n                                    <div className=\"form-group\">\r\n                                        <label className=\"form-control-label\">Password</label>\r\n                                        <input onChange={event=> this.setState({password: event.target.value})} type=\"password\" className=\"form-control\" ></input>\r\n                                    </div>\r\n                                    <div className=\"col-lg-12 loginbttm\">\r\n                                        {\r\n                                            this.state.displayAnimator ? <Spinner animation=\"grow\" />\r\n                                            : <div className=\"col-lg-6 login-btn login-button\">\r\n                                                <button onClick={this.loginUser} className=\"btn btn-outline-primary btn-light\" style={{alignContent: \"center\"}}>\r\n                                                    Login\r\n                                                </button>\r\n                                            </div>\r\n                                        }\r\n                                        \r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-lg-3 col-md-2\">\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}